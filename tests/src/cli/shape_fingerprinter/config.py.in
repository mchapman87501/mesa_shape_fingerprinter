from pathlib import Path

WORKSPACE_ROOT = Path("@CMAKE_SOURCE_DIR@")
SHARED_DATA_DIR = WORKSPACE_ROOT / "tests" / "data"
SHAPE_FP_DATA_DIR = SHARED_DATA_DIR / "shape_fingerprinter"
SHAPE_FP_EXE = Path("$<TARGET_FILE:shape_fingerprinter>")


def gen_sd_records(inf):
    buff = []
    for line in inf:
        buff.append(line)
        if line.strip() == "$$$$":
            yield buff
            buff = []
    if buff:
        yield buff


def gen_sd_names(inf):
    for buff in gen_sd_records(inf):
        yield buff[0].strip()
